# 2-1. 이더넷

- **물리 계층**와 **데이터 링크 계층**은 서로 밀접하게 관련이 있다. **이더넷**이라는 공통된 기술이 사용되기 때문이다.
  
- **이더넷**
    - **현대 LAN**, 특히 **유선 LAN** 환경에서 가장 대중적으로 사용되는 기술이다.
      
    - **다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법** 등이 정의된 네트워크 기술이다.

## 이더넷 표준

- 오늘날의 유선 LAN 환경은 대부분 이더넷 기반으로 구성된다
  
    - 물리 계층 - 이더넷 규격 케이블 사용
  
    - 데이터 링크 계층 - 이더넷 프레임의 형식
      
- **IEEE 802.3**
  
    - 이더넷 관련 다양한 표준 규격들의 집합
  
    - 이더넷 표준에 따라 지원되는 네트워크 장비, 통신 매체의 종류와 전송 속도 등이 달라질 수 있다.
      
- 서로 다름 컴퓨터가 각기 다른 제조사의 네트워크 장비를 사용하더라도, 동일한 형식의 프레임을 주고받고, 양속한듯 통일된 형태로 작동하는 것은? 통신 매체를 비롯한 네트워크 장비들이 이더넷 표준을 준수하기 때문!
  
- 허브, 스위치, NIC, 케이블 등 모든 네트워크 장비들은 특정 이더넷 표준을 이해하고 따른다.

## 통신 매체 표기 형태

이더넷 표준 규격에 따라 구현된 통신 매체를 지칭할 때는 `전송속도BASE-추가특성` 형태로 표기한다.

## 통신 매체 종류

| 추가특성 표기(통신 매체의 종류) | 케이블 종류 |
| --- | --- |
| C | 동축 케이블 |
| T | 트위스트 페어 케이블 (구리 선 이용) |
| S | 단파장 광섬유 케이블 (빛 이용) |
| L | 장파장 광섬유 케이블 (빛 이용) |

## 이더넷 프레임

- 현대 유선 LAN 환경은 대부분 이더넷을 기반으로 구성되므로, 호스트가 데이터 링크 계층에서 주고받는 프레임 형식은 정해져있다.
- 즉, 이더넷 네트워크에서 주고받는 프레임인 **이더넷 프레임** 형식은 정해져있다.

- **이더넷 프레임**
      
    - 상위 계층으로부터 받아들인 정보에 **헤더와 트레일러를 추가**하는 **캡슐화** 과정을 통해 만들어진다
      
    - 수신지 입장에서는 프레임의 **헤더와 트레일러를 제거**한 뒤 상위 계층으로 올려보내는 **역캡슐화** 과정을 거친다
 
    - **헤더**
        - 기본적으로 **프리앰블, 수신지 MAC 주소, 송신지 MAC 주소, 타입/길이**로 구성
          
    - **트레일러**
        - **FCS**로 구성

![이더넷 프레임](/Network/image/2.png)

### 프리앰블

- **이더넷 프레임의 시작을 알리는** 8바이트(64비트) 크기의 정보
  
- 프리앰블의 첫 7바이트는 10101010값을 가지고, 바지막 바이트는 101010**11** 값을 가진다.

- 수신지는 이 프리앰블을 통해 이더넷 프레임이 오고 있음을 알아차린다

- 즉, 프리앰블은 **송수신지 간의 동기화**를 위해 사용되는 정보이다.
  

### 수신지 MAC **주소와 송신지 MAC 주소** ⭐

- **MAC 주소**
      
    - **물리적 주소**라도고 불리며 데이터 링크 계층의 핵심이다.
      
    - **네트워크 인터페이스마다 부여**되는 6바이트(48비트, 16진수 열두 자리) 길이의 주소
      
    - **LAN 내의 수신지와 송신지를 특정**할 수 있다.
      
    - 일반적으로 고유하고, 일반적으로 변경되지 않는 주소로써 네트워크 인터페이스마다 부여된다.
      
    - 보통 NIC(Network Interface Contoller)라는 장치가 네트워크 인터페이스 역할을 담당한다.
      
    - 즉, 한 컴퓨터에 NIC가 여러 개 있다면 MAC 주소도 여러 개 있을 수 있다.
      
- 컴퓨터의 MAC 주소를 직접 확인하는 방법

    - window: `getmac /v` 혹은 `ipconfig /all` ⇒ AB-CD-EF-AB-CD-01
  
    - MacOS, Linux: `ifconfig` ⇒ a1:c2:e3:a4:c5:e6

### 타입/길이

- **타입** 혹은 **길이**가 올 수 있다.
  
    - 필드에 명시된 크기가 1500이하일 경우: 프레임의 **크기(길이)**를 나타낸다
  
    - 필드에 명시된 크기가 1536이상일 경우: **타입**을 나타낸다
      
- **타입**
  
    - 이더넷 프레임이 ‘어떤 정보를 캡슐화했는지’를 나타내는 정보
  
    - **이더타입** 이라고도 부른다
  
    - 대표적으로 상위 계층에서 사용된 프로토콜의 이름이 명시된다.
        
        
        | 타입 | 프로토콜 |
        | --- | --- |
        | 0800 | IPv4 |
        | 86DD | IPv6 |
        | 0806 | ARP |

### 데이터

- 상위 계층에서 전달받거나 상위 계층으로 전달해야할 내용
      
- 네트워크 계층의 데이터와 헤더를 합친 PDU가 이곳에 포함된다.
      
- 최대 크기는 1500바이트로, 반드시 **일정크기**(46바이트 이상)여야 한다.
      
- 그 이하의 데이터라면 크기를 맞추기 위해 **패딩**이라는 정보가 내부에 채워진다.

### FCS

- 수신한 이더넷 프레임에 오류가 있는지 확인하기 위한 필드 ⇒ **오류 검출**
  
- 송수신지의 **CRC** 값을 비교하여 오류를 검출한다.
      
    - **CRC**(Cyclic Redundancy Check) = 순환 중복 검사 = 오류 검출용 값
      
    - 송신지는 프리앰블을 제외한 나머지 필드 값을 바탕으로 CRC 값을 계산한 후, 이 값을 FCS 필드에 명시힌다.
      
    - 그리고 수신지는 수신한 프레임에서 프리앰블과 FCS 필드를 제외한 나머지 필드값을 바탕으로 CRC 값을 계산한 뒤, 이 값을 FCS 필드 값과 비교한다.
      
    - 이 때 비교 값이 일치하지 않으면 프레임에 오류가 있다고 판단하여 해당 프레임을 폐기한다.

## 토큰 링

- 이더넷 외에 다른 LAN 기술로는 **토큰 링** 방식이 대표적이다.
      
- 토큰 링 네트워크 에서는 호스트들이 **링(고리) 형태**로 연결된다.
- 호스트끼리 돌아가며 **토큰**이라는 특별한 정보를 주고받는다.
- 네트워크 내 다른 호스트에게 메시지를 송신하려면 반드시 이 토큰을 가지고 있어야한다.
